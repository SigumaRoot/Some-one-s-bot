"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Validator_1 = __importDefault(require("../classes/Validator"));
class OrValidator extends Validator_1.default {
    static NOT_AMONG_RULES = `Value does not match any of the validators defined`;
    validators;
    constructor(validators) {
        super();
        this.validators = validators;
        const schemas = validators.map(validator => validator.schema);
        this.schema = `{"$type":"or","$values":[${schemas.join(",")}]}`;
    }
    validate(data, locator) {
        if (this.validators.length < 1) {
            this.throw(locator, `Expected developer to provide at least 1 rule for the OR operation`);
        }
        for (const validator of this.validators) {
            if (validator.validate(data, locator).success)
                return this.success(data);
        }
        return this.failure(locator, OrValidator.NOT_AMONG_RULES, this, data);
    }
}
exports.default = OrValidator;
