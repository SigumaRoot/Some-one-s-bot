"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const __1 = require("..");
/**
 * Use this function to verify the types for an api's request's query string
 * This way, you can catch errors before they affect your express callback
 *
 * @param rule Rule to compare the object with
 */
exports.default = (validator) => (handler) => (req, res) => {
    const { success, errors, data } = (0, __1.validate)(req.query, validator);
    if (success) {
        req.query = data;
        handler(req, res);
    }
    else {
        res.status(400).send({ errors });
    }
};
